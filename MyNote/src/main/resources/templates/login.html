<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyNote我的筆記-登入</title>
 <!-- Tailwind CSS -->
    <link href="/tailwind.min.css" rel="stylesheet">

    <style>
  @font-face {
    font-family: 'Inter';
    src: url('/Inter_18pt-Regular.ttf') format('truetype');
    font-weight: 400;
    font-style: normal;
  }

        @font-face {
          font-family: 'ChenYuluoyan';
          src: url('/ChenYuluoyan-2.0-Thin.ttf') format('truetype');
          font-weight: 300;
          font-style: normal;
        }

  body {
      font-family: 'Inter', sans-serif;
   font-weight: 400;
  }

        textarea { resize: none; }
    </style>
</head>
<body class="bg-gray-100">

    <div id="app-container"></div>

<script>
    const DEFAULT_USERNAME = '';
    let usernameInput = DEFAULT_USERNAME;
    const appContainer = document.getElementById('app-container');

    const getIcon = (iconName, size = 20, className = '') => {
        const icons = {
            'Squirrel': `
                <path d="M15.236 22a3 3 0 0 0-2.2-5"/>
                <path d="M16 20a3 3 0 0 1 3-3h1a2 2 0 0 0 2-2v-2a4 4 0 0 0-4-4V4"/>
                <path d="M18 13h.01"/>
                <path d="M18 6a4 4 0 0 0-4 4 7 7 0 0 0-7 7c0-5 4-5 4-10.5a4.5 4.5 0 1 0-9 0 2.5 2.5 0 0 0 5 0C7 10 3 11 3 17c0 2.8 2.2 5 5 5h10"/>
            `,
            'ArrowRight': `
                <line x1="5" x2="19" y1="12" y2="12"/>
                <polyline points="12 5 19 12 12 19"/>
            `
        };
        return `
            <svg xmlns="http://www.w3.org/2000/svg" width="${size}" height="${size}" 
                viewBox="0 0 24 24" fill="none" stroke="currentColor" 
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" 
                class="${className}">
                ${icons[iconName] || ''}
            </svg>
        `;
    };

    function handleLogin(event) {
        event.preventDefault();
        const account = document.getElementById('username-input').value.trim();
        const password = document.getElementById('password-input').value;

        fetch("/login", {
            method: "POST",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: `account=${encodeURIComponent(account)}&password=${encodeURIComponent(password)}`
        })
        .then(res => res.text())
        .then(result => {
            if (result === "ok") window.location.href = "/notes";
            else alert("帳號或密碼錯誤！");
        });
    }

    function renderLogin() {
        appContainer.className = "min-h-screen";
        appContainer.innerHTML = `
            <div class="min-h-screen bg-gray-50 flex flex-col justify-center items-center p-4">

                <div class="bg-white p-10 rounded-2xl w-full max-w-md">
                    <div class="flex flex-col items-center mb-1">
                        <div class="w-16 h-16 rounded-2xl flex items-center justify-center text-white"
                             style="background:#fab484;">
                            ${getIcon('Squirrel', 40)}
                        </div>

                        <h1 class="mt-4"
                            style="
                                font-family: 'ChenYuluoyan', sans-serif;
                                font-size: 2.7rem;
                                font-weight: 700;
                                letter-spacing: 1.5px;
                                color: #222;
                            ">
                            MyNote
                        </h1>
                    </div>

                    <p class="text-gray-500 text-center mb-8">您的專屬個人筆記空間</p>

                    <form id="login-form" class="space-y-4">

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">帳號</label>
                            <input 
                                type="text" 
                                id="username-input"
                                value="${usernameInput}"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg outline-none transition-all"
                                placeholder="請輸入帳號"
                                onfocus="this.style.borderColor='#f0945d'"
                                onblur="this.style.borderColor='#ccc'"
                            >
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">密碼</label>
                            <input 
                                type="password" 
                                id="password-input"
                                class="w-full px-4 py-2 border border-gray-300 rounded-lg outline-none transition-all"
                                placeholder="請輸入密碼"
                                onfocus="this.style.borderColor='#f0945d'"
                                onblur="this.style.borderColor='#ccc'"
                            >
                        </div>

                        <button 
                            type="submit"
                            class="w-full text-white font-bold py-3 rounded-lg transition-colors flex items-center justify-center gap-2 mt-4"
                            style="background:#f0945d;"
                            onmouseover="this.style.background='#d99156'"
                            onmouseout="this.style.background='#f0945d'"
                        >
                            登入 ${getIcon('ArrowRight', 18)}
                        </button>
                    </form>

                </div>
            </div>
        `;

        document.getElementById('login-form').addEventListener('submit', handleLogin);
        document.getElementById('username-input').addEventListener('input', e => {
            usernameInput = e.target.value;
        });
    }

    window.onload = renderLogin;
</script>

</body>
</html>